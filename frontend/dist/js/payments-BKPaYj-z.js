import{r as e,j as t,ah as s,ai as r,aj as a,ak as i,al as l,am as n,an as d,ao as c,ap as o,aq as m,ar as x}from"./react-DbYntunD.js";import{c as h,a as p}from"./context-D0qgWKLK.js";function u(){const{subscriptionTiers:l,currentSubscription:n,createSubscription:d,cancelSubscription:c,loading:o}=h(),{language:m,t:x}=p(),[u,y]=e.useState(!1);return t.jsxs("div",{className:"min-h-screen bg-gray-950 text-white",children:[t.jsx("div",{className:"border-b border-gray-800",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:x("subscription.title")||"Subscription Management"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:x("subscription.subtitle")||"Choose the perfect plan for your healthcare integration needs"})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[n&&t.jsxs("div",{className:"mb-12 bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-white",children:"Current Subscription"}),t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"active":return"text-green-400";case"past_due":return"text-yellow-400";case"canceled":return"text-red-400";default:return"text-gray-400"}})(n.status)}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Plan"}),t.jsx("p",{className:"text-white font-medium",children:l.find((e=>e.id===n.tier))?.name||n.tier})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Next Billing Date"}),t.jsxs("p",{className:"text-white font-medium flex items-center",children:[t.jsx(s,{className:"w-4 h-4 mr-2"}),(b=n.currentPeriodEnd,new Date(b).toLocaleDateString("ar"===m?"ar-SA":"en-US"))]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Auto-Renewal"}),t.jsx("p",{className:"text-white font-medium",children:n.cancelAtPeriodEnd?"Disabled":"Enabled"})]})]}),"active"===n.status&&!n.cancelAtPeriodEnd&&t.jsx("div",{className:"mt-6",children:t.jsx("button",{onClick:()=>y(!0),className:"text-red-400 hover:text-red-300 text-sm font-medium transition-colors",children:"Cancel Subscription"})})]}),t.jsx("div",{className:"grid lg:grid-cols-4 gap-8",children:l.map((e=>{const s=n?.tier===e.id,i=e.isPopular;return t.jsxs("div",{className:`relative bg-gray-900/50 backdrop-blur-sm border rounded-2xl p-6 transition-all duration-300 hover:scale-105 ${i?"border-primary-500 ring-1 ring-primary-500/20":"border-gray-800 hover:border-gray-700"} ${s?"ring-2 ring-green-500/50":""}`,children:[i&&t.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:t.jsxs("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 text-white px-4 py-1 rounded-full text-sm font-medium flex items-center",children:[t.jsx(r,{className:"w-4 h-4 mr-1"}),"Popular"]})}),s&&t.jsx("div",{className:"absolute -top-3 right-4",children:t.jsx("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current Plan"})}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e.name}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("span",{className:"text-3xl font-bold text-white",children:["$",e.price]}),t.jsx("span",{className:"text-gray-400 text-sm",children:"/month"})]}),t.jsx("p",{className:"text-gray-400 text-sm",children:e.description})]}),t.jsx("ul",{className:"space-y-3 mb-8",children:e.features.map(((e,s)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx(a,{className:"w-5 h-5 text-green-400 mr-3 mt-0.5 flex-shrink-0"}),t.jsx("span",{className:"text-gray-300 text-sm",children:e})]},s)))}),t.jsx("button",{onClick:()=>(async e=>{try{await d(e,"default")}catch(t){}})(e.id),disabled:o||s,className:"w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 "+(s?"bg-gray-800 text-gray-400 cursor-not-allowed":i?"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white":"bg-gray-800 hover:bg-gray-700 text-white"),children:o?"Processing...":s?"Current Plan":`Subscribe to ${e.name}`})]},e.id)}))}),u&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(i,{className:"w-8 h-8 text-yellow-400 mr-3"}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Cancel Subscription"})]}),t.jsx("p",{className:"text-gray-400 mb-6",children:"Are you sure you want to cancel your subscription? You'll continue to have access until the end of your current billing period."}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-2 px-4 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Keep Subscription"}),t.jsx("button",{onClick:async()=>{try{await c(),y(!1)}catch(e){}},disabled:o,className:"flex-1 py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50",children:o?"Canceling...":"Cancel Subscription"})]})]})})]})]});var b}function y({onSuccess:s}){const r=o(),a=m(),{addPaymentMethod:i}=h(),[l,n]=e.useState(!1),[d,c]=e.useState(null);return t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!r||!a)return;n(!0),c(null);const t=a.getElement(x);if(!t)return;const{error:l,paymentMethod:d}=await r.createPaymentMethod({type:"card",card:t});if(l)return c(l.message||"Failed to create payment method"),void n(!1);try{await i(d.id),s()}catch(o){c(o instanceof Error?o.message:"Failed to add payment method")}finally{n(!1)}},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"card-element",className:"block text-sm font-medium text-gray-300 mb-2",children:"Card Details"}),t.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:t.jsx(x,{id:"card-element",options:{style:{base:{fontSize:"16px",color:"#ffffff","::placeholder":{color:"#9ca3af"}},invalid:{color:"#ef4444"}}}})})]}),d&&t.jsx("div",{className:"text-red-400 text-sm",children:d}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>s(),className:"flex-1 py-2 px-4 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:!r||l,className:"flex-1 py-2 px-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-colors disabled:opacity-50",children:l?"Adding...":"Add Payment Method"})]})]})}function b(){const{paymentMethods:s,removePaymentMethod:r,setDefaultPaymentMethod:i,stripe:o}=h(),{t:m}=p(),[x,u]=e.useState(!1);return o?t.jsxs("div",{className:"min-h-screen bg-gray-950 text-white",children:[t.jsx("div",{className:"border-b border-gray-800",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:m("payment.methods.title")||"Payment Methods"}),t.jsx("p",{className:"text-gray-400",children:m("payment.methods.subtitle")||"Manage your payment methods and billing information"})]}),!x&&t.jsxs("button",{onClick:()=>u(!0),className:"flex items-center px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-colors",children:[t.jsx(l,{className:"w-5 h-5 mr-2"}),"Add Payment Method"]})]})})}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x&&t.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-6 mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Add New Payment Method"}),t.jsx(n,{stripe:o,children:t.jsx(y,{onSuccess:()=>u(!1)})})]}),t.jsx("div",{className:"space-y-4",children:0===s.length?t.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 text-center",children:[t.jsx(d,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No Payment Methods"}),t.jsx("p",{className:"text-gray-400 mb-4",children:"Add a payment method to start using BrainSAIT services"}),t.jsx("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-lg transition-colors",children:"Add Your First Payment Method"})]}):s.map((e=>{return t.jsx("div",{className:"bg-gray-900/50 backdrop-blur-sm border rounded-2xl p-6 transition-all duration-200 "+(e.isDefault?"border-primary-500 ring-1 ring-primary-500/20":"border-gray-800 hover:border-gray-700"),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"text-3xl",children:(l=e.brand||"",l?.toLowerCase(),"ðŸ’³")}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("h3",{className:"font-semibold text-white capitalize",children:[e.brand||"Card"," â€¢â€¢â€¢â€¢ ",e.last4]}),e.isDefault&&t.jsx("span",{className:"px-2 py-1 bg-primary-500/20 text-primary-400 text-xs rounded-full font-medium",children:"Default"})]}),e.expiryMonth&&e.expiryYear&&t.jsxs("p",{className:"text-gray-400 text-sm",children:["Expires ",e.expiryMonth.toString().padStart(2,"0"),"/",e.expiryYear]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[!e.isDefault&&t.jsx("button",{onClick:()=>(async e=>{try{await i(e)}catch(t){}})(e.id),className:"p-2 text-gray-400 hover:text-primary-400 transition-colors",title:"Set as default",children:t.jsx(a,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this payment method?"))try{await r(e)}catch(t){}})(e.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Remove payment method",disabled:e.isDefault&&1===s.length,children:t.jsx(c,{className:"w-5 h-5"})})]})]})},e.id);var l}))}),t.jsx("div",{className:"mt-8 bg-blue-500/10 border border-blue-500/20 rounded-2xl p-6",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-blue-400 mb-1",children:"Secure Payment Processing"}),t.jsx("p",{className:"text-blue-300/80 text-sm",children:"Your payment information is encrypted and securely processed by Stripe. We never store your complete card details on our servers."})]})]})})]})]}):t.jsx("div",{className:"min-h-screen bg-gray-950 text-white flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Loading payment system..."})]})})}export{b as P,u as S};
